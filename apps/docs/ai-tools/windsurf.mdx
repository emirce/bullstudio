---
title: "Windsurf Setup"
description: "Configure Windsurf for BullMQ and bullstudio development"
icon: "water"
---

Configure Windsurf's Cascade AI assistant to help you build and maintain BullMQ queue systems with bullstudio monitoring.

## Prerequisites

- Windsurf editor installed
- A project using BullMQ

## Setup

Create workspace rules that provide Windsurf with context about your queue development project.

Create `.windsurf/rules.md` in your project root:

````markdown
# BullMQ and bullstudio development rules

## Project context

- This project uses BullMQ for job queue processing
- Queues are monitored via bullstudio (https://bullstudio.dev)
- We follow BullMQ best practices for production reliability

## BullMQ code patterns

### Queue setup

```typescript
import { Queue } from 'bullmq';

const queue = new Queue('queue-name', {
  connection: {
    host: process.env.REDIS_HOST,
    port: parseInt(process.env.REDIS_PORT || '6379'),
    password: process.env.REDIS_PASSWORD,
  },
  defaultJobOptions: {
    attempts: 3,
    backoff: {
      type: 'exponential',
      delay: 1000,
    },
    removeOnComplete: { age: 3600, count: 1000 },
    removeOnFail: { age: 86400 },
  },
});
```

### Worker setup

```typescript
import { Worker, Job } from 'bullmq';

const worker = new Worker(
  'queue-name',
  async (job: Job) => {
    await job.updateProgress(10);
    const result = await processJob(job.data);
    await job.updateProgress(100);
    return result;
  },
  {
    connection: redisConnection,
    concurrency: 5,
  }
);

worker.on('failed', (job, err) => {
  console.error(`Job ${job?.id} failed:`, err);
});

worker.on('completed', (job, result) => {
  console.log(`Job ${job.id} completed`);
});
```

## Error handling requirements

- Always use try-catch in job processors
- Log errors with job ID for debugging in bullstudio
- Use UnrecoverableError for permanent failures
- Configure backoff strategies for transient errors

```typescript
import { UnrecoverableError } from 'bullmq';

async (job: Job) => {
  try {
    await processJob(job.data);
  } catch (error) {
    if (isPermanentError(error)) {
      throw new UnrecoverableError(error.message);
    }
    throw error; // Will be retried
  }
}
```

## Code quality standards

- Use TypeScript with proper type definitions
- Define interfaces for all job data
- Use environment variables for configuration
- Add error event handlers on all workers
- Use descriptive queue and job names

## bullstudio visibility

- Use descriptive job names (visible in bullstudio dashboard)
- Call `job.updateProgress()` for long-running jobs
- Structure job data as clean, readable JSON
- Use consistent naming conventions across queues

## Do not

- Hardcode Redis credentials
- Create workers without error handlers
- Use generic job names like "job" or "task"
- Ignore failed jobs without proper logging
````

## Using Windsurf with bullstudio

### Ask Cascade for help with:

**Creating new workers:**
```
Create a BullMQ worker for the 'order-processing' queue that:
- Validates order data
- Charges the payment
- Sends confirmation email
- Updates inventory
- Reports progress at each step
```

**Debugging failed jobs:**
```
This job failed in bullstudio with the error:
[paste error from bullstudio job details]

Job data was:
[paste job data]

How should I fix the worker code?
```

**Improving performance:**
```
My bullstudio dashboard shows processing time of 5000ms average.
Here's the worker code:
[paste code]

How can I optimize this?
```

**Setting up monitoring:**
```
Help me configure alerts for my BullMQ queues. I have:
- order-processing: critical, ~500 jobs/hour
- email-notifications: medium priority, ~2000 jobs/hour
- analytics-events: low priority, ~10000 jobs/hour

What thresholds should I set in bullstudio?
```

## Next Steps

<Columns cols={2}>
  <Card title="Connection Setup" icon="plug" href="/getting-started/connection/overview">
    Connect your queues to bullstudio.
  </Card>
  <Card title="Monitoring Best Practices" icon="star" href="/guides/monitoring-best-practices">
    Learn effective monitoring strategies.
  </Card>
</Columns>
